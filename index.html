<!DOCTYPE HTML>
<html>
	<head>
		<title>Dynamake's project page</title>
		<script src="jquery-2.1.1.min.js"></script>
		<style>
			body {
				font-family: "Palatino Linotype", "Book Antiqua", Palatino, serif;
				width: 90%;
				max-width: 1024px;    
				margin-left: auto;
				margin-right: auto;
			}
			
			a:link    {color:#1EA669;}
			a:visited {color:#1EA669;}
			a:hover   {color:#1A6E37;}
			a:active  {color:#A61E5B;}
			
			.box {
				border:2px solid #CFE8DD;
				padding: 10px;
				margin: 20px;
				background-color: #B2D6C6;
			}
			
			h1 { 
				align: center;
			}
		</style>
		<script>
			function getAsMap(mapping) {
				var map = {};
				mapping.each(function(i, o) {
					map[o.key] = o.value;
				});
				return map;
			}
			
			function createExpandFunction(holder, link, definitions, term) {
				return function() {
					// Get copy of definition
					var definition = definitions[term].clone();
					//alert(definitions[term]);
					replaceMentions(definition, definitions);
					var definitionEl = link.clone();
					definitionEl.click(createCollapseFunction(holder, link, definitions, term));
					
					var newEl = $(document.createElement("span"))
						.append(definitionEl)
						.append(definition);
						
					//newEl = newEl.wrap("<span></span>").parent()
					newEl = newEl.wrap("<div></div>").parent()
						.css("border", "1px solid #666")
						.css("margin", "2px")
						.css("padding", "2px");
					
					holder.contents().replaceWith(newEl);
					
					return false;
				};
			}
			
			function createCollapseFunction(holder, link, definitions, term) {
				return function() {
					var definitionEl = link.clone();
					definitionEl.click(createExpandFunction(holder, link, definitions, term));
					holder.contents().replaceWith(definitionEl);
					
					return false;
				};
			}
			
			function replaceMentions(el, definitions) {
				el.find("span[data-mention]").replaceWith(function() {
					var term = $(this).attr("data-mention");
					var contents = $(this).clone();
					
					var link = contents.wrap("<span><a href='dummy'></a></span>").parent();
					
					var holder = link.parent();
					link.click(createExpandFunction(holder, link, definitions, term));
					
					return holder;
				});
			}
			
			$( document ).ready(function() {
				var definitionsQ = $("div[data-define]");
				
				var definitions = getAsMap(definitionsQ.map(function() {
					var term = $(this).attr("data-define");
					return {
						key: term,
						value: $(this)
					}
				}));
				
				$("div[data-define]").replaceWith("");
			
				var boxes = $("div.box");
				boxes.find("div.title").replaceWith(function() {
					return $(this).contents().wrap("<div style='margin-bottom:15px; font-style:italic'></div>").parent();
				});
				
				replaceMentions(boxes, definitions);
			});
		</script>
	</head>

	<body>
		<div data-define="programming environment">
			Here is the definition of a programming environment.
		</div>
		<div data-define="network usage">
			Here is the definition of using Dynamake across a network.
			<span data-mention="dummy1">Mention of dummy1</span>
		</div>
		<div data-define="dummy1">
			<span data-mention="dummy2">Mention of dummy2</span>
		</div>
		<div data-define="dummy2">
			<span data-mention="dummy1">Mention of dummy1</span>
		</div>
	
		<h1 align="center">
			Welcome to Dynamake's project page<br>
			<a href="https://github.com/jakobehmsen/dynamake"> hosted on GitHub</a>
		</h1>

		<div class="box">
			<div class="title">What is Dynamake about?</div>
			<div class="content">
			Dynamake is an attempt to envision, design, and implement an interactive code extrinsic <span data-mention="programming environment">programming environment</span>. 
			This environment is to require only little configuration effort before getting the hands dirty.
			</div>
		</div>

		<div class="box">
			<div class="title">What is Dynamake not about?</div>
			<div class="content">
			There is no aspiration of developing a programming environment for solving every kind of problem. 
			Instead, the environment is developed in an open-ended, experimental, and intuitive manner with a focus on a platform for making software.
			</div>
		</div>

		<div class="box">
			<div class="title">Why was this project started?</div>
			<div class="content">
			There were/are many reasons motivating this project. Lets look at a couple of'em.<div style="clear=both"></div>
			Most popular programming environments seem to dichotomize programs and processes simply by centering around code. What if one attempts to not adopt this dichotomy?<div style="clear=both"></div>
			Most popular programming environments are oriented around some sort of text-based, or similarly structered, programming language. What if no language is available at all - how does one program?
			</div>
		</div>

		<div class="box">
			<div class="title">What is the current state of Dynamake?</div>
			<div class="content">
			Dynamake is a rather new project, started April 2014, but some of the envisioned attributes are starting to emerge.
			</div>
		</div>

		<div class="box">
			<div class="title">What about the future of Dynamake?</div>
			<div class="content">
			One of the major works in the horizon is support for <span data-mention="network usage">using Dynamake across a network</span>.
			</div>
		</div>
	</body>
</html>